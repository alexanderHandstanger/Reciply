<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Reciply.Pages.Recipepage">

    <NavigationPage.TitleView>
        <StackLayout Orientation="Horizontal">
            <Button ImageSource="home"
                    BackgroundColor="Transparent"
                    HeightRequest="30"
                    WidthRequest="30"
                    VerticalOptions="StartAndExpand"
                    HorizontalOptions="Start"
                    Clicked="Home_Button_Clicked"
                    />
            <Label Text="Reciply"
                   HorizontalOptions="StartAndExpand"
                   VerticalOptions="CenterAndExpand"
                   FontAttributes="Bold"
                   FontSize="20"/>
            <Label Text="Test Username"
                   HorizontalOptions="StartAndExpand"
                   VerticalOptions="CenterAndExpand"
                   FontAttributes="Bold"
                   FontSize="20"/>
            <!--TODO Add login/logout here with keycloak-->
            <Button ImageSource="logout"
                    BackgroundColor="Transparent"
                    HeightRequest="30"
                    WidthRequest="30"
                    VerticalOptions="CenterAndExpand"
                    HorizontalOptions="End" />
            <Button ImageSource="settings"
                    BackgroundColor="Transparent"
                    HeightRequest="30"
                    WidthRequest="30"
                    VerticalOptions="CenterAndExpand"
                    HorizontalOptions="End" />
        </StackLayout>
    </NavigationPage.TitleView>
    
    
    <ScrollView>
        <StackLayout Margin="10" >
            <Frame 
            BackgroundColor="#2196F3" 
            Padding="0" 
            CornerRadius="0"/>

            <Frame BackgroundColor="#70DBFF" Padding="5" CornerRadius="0">
                <Label Text="{Binding Name}" FontAttributes="Bold" FontSize="20" HorizontalTextAlignment="Center" VerticalTextAlignment="Center"></Label>
            </Frame>
            
            <Label 
            Grid.Column="0"
            Text="Zutaten:"
            FontAttributes="Bold"
            FontSize="20">
            </Label>

            <ListView
            IsVisible="true"
            x:Name="ingredients"
            Margin="10"
            HeightRequest="200"
            ItemsSource="{Binding ingredients}"
            CachingStrategy="RecycleElement"
            SeparatorColor="Transparent"
            BackgroundColor="Transparent">
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <ViewCell>
                            <StackLayout Orientation="Horizontal">
                                <Label Text="{Binding Item}"/>
                                <Label Text="{Binding Amount}"/>
                                <Label Text="{Binding UnitOfMeasurement}"/>
                            </StackLayout>
                        </ViewCell>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>

            <Label 
            Text="Portionen:"
            FontAttributes="Bold"
            FontSize="20">
            </Label>
            <Label Text="{Binding Portion}"/>
            <Button Text="+" Clicked="AddPortion"/>
            <Button Text="-" Clicked="RemovePortion"/>
            <!--TODO should refresh!-->

            <Label 
            Text="Dauer:"
            FontAttributes="Bold"
            FontSize="20">
            </Label>
            <Label Text="{Binding Duration}"/>

            <Label 
            Text="Tags:"
            FontAttributes="Bold"
            FontSize="20">
            </Label>
            <Label Text="{Binding Tags}"/>

            <Label 
            Text="Beschreibung:"
            FontAttributes="Bold"
            FontSize="20">
            </Label>
            <Label Text="{Binding Description}"/>

            <Label 
            Text="Zubereitung:"
            FontAttributes="Bold"
            FontSize="20">
            </Label>
            <Label Text="{Binding Preparation}"/>

            <Button 
            Text="Zur Einkaufsliste hinzufügen" 
            Clicked="AddToShoppingList"
            Margin="0,0,0,0" 
            BackgroundColor="#38DA38" 
            CornerRadius="10" 
            TextTransform="None"               
            HeightRequest="60"/>
        </StackLayout>
    </ScrollView>
</ContentPage>